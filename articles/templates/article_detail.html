{% extends 'base.html' %}

{% block title %}Article Detail{% endblock title %}
{% block content %}
<div class="mt-3 container-fluid">
  <a class="btn btn-info mt-auto" href="{% url 'article_new'%}">New Article</a>
  <form class="form-inline mt-auto float-right" action="{% url 'search_results' %}" method="get">
    <input name="q" class="form-control" type="text" placeholder="Search all articles" aria-label="Search">
  </form>
</div>
<hr />
<p>Return to <a href="{% url 'article_list' %}">All Articles</a>.</p>
<div class="card">
  <div class="card-header">
    <span class="font-weight-bold">{{ article.title }}</span> &middot;
    <span class="text-muted">by {{ article.author }} | {{ article.date }}</span>
  </div>
  <div class="card-body">
    <p>{{ article.body }}</p>
  </div>
  <div class="card-footer">
    {% if article.comments.count != 0 %}
    <a href="{% url 'article_comment_add' article.pk %}">Add Comment</a>
    <hr />
    {% else %}
    <p class="text-muted">There are no comments for this article. <a href="{% url 'article_comment_add' article.pk %}">Be the first!</a></p>
    {% endif %}
    {% for comment in article.comments.all %}
    <p>
      <span class="font-weight-bold">{{ comment.user }} &middot;</span>
      {{ comment }}
    </p>
    {% if not forloop.last %}
    <hr />
    {% endif %}
    {% endfor %}
  </div>
</div>
<br />
{% endblock content %}